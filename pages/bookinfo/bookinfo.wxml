<van-button custom-class="backbutton"
  custom-style="top: {{signaTop}}px; width: {{signaHeight}}px; height: {{signaHeight}}px;" icon="arrow-left"
  bind:click="goBack">
</van-button>

<view wx:if="{{loading}}" class="loading">
  <van-loading size="35" color="#71beae" />
</view>

<view wx:if="{{!loading && error}}" class="loading">
  <van-image width="600rpx" src="../../../../static/img/error.png" fit="widthFix" />
  <view class="banktext">æš‚æ— ç»“æœ</view>
</view>

<view wx:if="{{!loading && !error}}">
  <view class="top">
    <van-image custom-class="topcover" width="100%" src="{{ cover_url }}" fit="widthFix" />
  </view>

  <view class="allinfo">
    <van-row>
      <van-col span="10">
        <view class="bookcover">
          <van-image custom-class="coverimg" width="125" radius="10" src="{{ cover_url }}" fit="widthFix" />
        </view>
      </van-col>
      <van-col span="14">
        <view class="title">{{ title }}</view>
        <view class="author">{{ author ? author : 'æœªçŸ¥' }}</view>
        <van-tag custom-class="pages" plain color="#71BEAE" size="medium">é¡µæ•°ï¼š{{ pages ? pages : 'æœªçŸ¥' }}</van-tag>
        <!-- <view class="pages">é¡µæ•°ï¼š{{ pages }}</view> -->
        <view class="rating">
          <van-rate readonly allow-half value="{{ rating }}" color="#ffd21e" void-color="#eee" void-icon="star" />
          <text class="ratingscore">{{ rating }}</text>
        </view>
      </van-col>
    </van-row>

    <view class="introduce">
      <text class="introtitle">Introduction</text>
      <view wx:if="{{book_intro.length == 0}}" class="intro">æš‚æ— ä¿¡æ¯</view>
      <view wx:else class="intro" bindtap="ifIntroShow">{{ ifIntroShow ? book_intro : introShortText }}</view>
    </view>

    <view class="twobutton">
      <van-button wx:if="{{!ifCollection}}" custom-class="collect" color="#eaeaea" bind:click="collect">åŠ å…¥æ”¶è—
      </van-button>
      <van-button wx:if="{{ifCollection}}" custom-class="collect" color="#eaeaea" bind:click="cancelCollect">å·²æ”¶è—
      </van-button>
      <van-button wx:if="{{isAble}}" custom-class="select" color="#ffbc03" bind:click="showPopup">è®¾ä¸ºæ‰“å¡å›¾ä¹¦</van-button>
      <van-button wx:else custom-class="select" color="#ffbc03" disabled>å½“å‰æ‰“å¡å›¾ä¹¦</van-button>
    </view>

    <van-popup custom-class="vanpopup" show="{{ ifPopupShow }}" round position="bottom" custom-style="height: 250px"
      bind:close="closePopup">
      <view class="popup">
        <text class="popuptitle">æ˜¯å¦è®¾ä¸ºæ‰“å¡å›¾ä¹¦</text>
        <van-button custom-class="confirm" color="#71BEAE" round block bind:click="setNowReading"
          loading="{{ setLoading }}">ç¡®å®š</van-button>
        <van-button custom-class="cancel" color="#C0C4CC" round block bind:click="closePopup">å–æ¶ˆ</van-button>
      </view>
    </van-popup>

    <view class="details">
      <text class="detailstitle">Details</text>
      <view class="alldetails">
        <view>ä½œè€…ï¼š{{ author.length != 0 ? author : 'æœªçŸ¥' }}</view>
        <view>ä¹¦åï¼š{{ title.length != 0 ? title : 'æœªçŸ¥' }}</view>
        <view>å‡ºç‰ˆç¤¾ï¼š{{ publish.length != 0 ? publish : 'æœªçŸ¥' }}</view>
        <view>ISBNï¼š{{ isbn }}</view>
        <view>é¡µæ•°ï¼š{{ pages ? pages : 'æœªçŸ¥' }}</view>
      </view>
    </view>
    <view class="authorinfo">
      <text class="authortitle">Author</text>
      <view wx:if="{{author_intro.length == 0}}" class="authorintro">æš‚æ— ä¿¡æ¯</view>
      <view wx:else class="authorintro" bindtap="ifAuthorShow">{{ ifAuthorShow ? author_intro : authorShortText }}
      </view>
    </view>

    <!-- <view class="content">
      <text class="contenttitle">Content</text>
      <view class="contentinfo">{{ catalog }}</view>
    </view> -->
  </view>

  <view wx:if="{{!isAble}}" class="clockin" bindtap="toClockIn">
    <van-button custom-class="clockinbutton" color="#71BEAE">ğŸ“ æ‰“å¡</van-button>
  </view>

  <view class="blank"></view>
</view>